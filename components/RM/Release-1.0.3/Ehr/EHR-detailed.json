{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.3/Ehr/EHR-detailed.json",
    "title": "EHR",
    "description": "The EHR object is the root object and access point of an EHR for a subject of care. ",
    "$comments": "Defined in Ehr IM",
    "type": "object",
    "properties": {
        "system_id": {
            "description": "The id of the EHR repository on which this EHR was created. \n",
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.3/Support/all-detailed.json#/definitions/HIER_OBJECT_ID"
        },
        "ehr_id": {
            "description": "The id of this EHR. ",
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.3/Support/all-detailed.json#/definitions/HIER_OBJECT_ID"
        },
        "contributions": {
            "description": "List of contributions causing changes to this EHR. Each contribution contains a list of versions, which may include references to any number of VERSION instances, i.e. items of type VERSIONED_COMPOSITION and VERSIONED_FOLDER. ",
            "type": "array",
            "items": {
                "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.3/Support/all-detailed.json#/definitions/OBJECT_REF"
            }
        },
        "ehr_status": {
            "description": "Reference to EHR_STATUS object for this EHR.",
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.3/Support/all-detailed.json#/definitions/OBJECT_REF"
        },
        "ehr_access": {
            "description": "Reference to EHR_ACCESS object for this EHR.",
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.3/Support/all-detailed.json#/definitions/OBJECT_REF"
        },
        "compositions": {
            "description": "Master list of all Versioned Composition references in this EHR.",
            "type": "array",
            "items": {
                "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.3/Support/all-detailed.json#/definitions/OBJECT_REF"
            }
        },
        "directory": {
            "description": "Optional directory structure for this EHR. ",
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.3/Support/all-detailed.json#/definitions/OBJECT_REF"
        },
        "time_created": {
            "description": "Time of creation of the EHR.",
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.3/Data_types/all-detailed.json#/definitions/DV_DATE_TIME"
        }
    },
    "required": [
        "system_id",
        "ehr_id",
        "ehr_status",
        "ehr_access",
        "time_created"
    ],
    "$invariants": {
        "Contributions_valid": "contributions.for_all (c | c.type.is_equal(\u201cCONTRIBUTION\u201d))",
        "Ehr_access_valid": "ehr_access.type.is_equal (\u201cVERSIONED_EHR_ACCESS\u201d)",
        "Ehr_status_valid": "ehr_status.type.is_equal(\u201cVERSIONED_EHR_STATUS\u201d)",
        "Compositions_valid": "compositions.for_all (c | c.type.is_equal (\u201cVERSIONED_COMPOSITION\u201d))",
        "Directory_valid": "directory /= Void implies directory.type.is_equal (\u201cVERSIONED_FOLDER\u201d)"
    }
}